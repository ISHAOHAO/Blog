---
import { Icon } from "astro-icon/components";
import Comment from "../../components/Comment.astro";
import FriendCard from "../../components/FriendCard.astro";
import friendsData from "../../data/friends.json";
import MainGridLayout from "../../layouts/MainGridLayout.astro";

const myInfo = {
    name: "HAOHAO",
    url: "https://blog.ishaohao.cn",
    avatar: "https://blog.ishaohao.cn/_astro/demo-avatar.DK0leUqa_ZL0wwP.webp",
    bio: "å¿ƒå¹³æ°”å’Œï¼Œä¸ä¸–æ— äº‰",
    email: "me@ishaohao.cn",
};
---

<MainGridLayout title="å‹æƒ…é“¾æ¥">
    <div class="flex flex-col w-full gap-6">
        <section
            class="card-base z-10 px-6 py-8 md:px-9 relative w-full overflow-hidden"
        >
            <div class="flex items-center gap-4 mb-10">
                <div
                    class="w-1.5 h-8 bg-gradient-to-b from-[var(--primary)] to-blue-400 rounded-full shadow-[0_0_15px_rgba(var(--primary-rgb),0.5)]"
                >
                </div>
                <h1
                    class="text-3xl font-black bg-clip-text text-transparent bg-gradient-to-r from-black/90 to-black/60 dark:from-white/95 dark:to-white/70"
                >
                    å‹æƒ…é“¾æ¥
                </h1>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                {friendsData.map((friend) => <FriendCard {...friend} />)}
            </div>
        </section>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <div
                class="card-base p-6 md:p-8 lg:col-span-2 flex flex-col justify-between"
            >
                <div>
                    <div class="flex items-center gap-3 mb-6">
                        <div
                            class="p-2 rounded-lg bg-[var(--primary)]/10 text-[var(--primary)]"
                        >
                            <Icon
                                name="material-symbols:info-outline-rounded"
                                class="text-xl"
                            />
                        </div>
                        <h2
                            class="text-xl font-bold text-black/80 dark:text-white/90"
                        >
                            ç”³è¯·é¡»çŸ¥
                        </h2>
                    </div>
                    <div
                        class="grid grid-cols-1 md:grid-cols-2 gap-6 text-sm text-zinc-600 dark:text-zinc-400"
                    >
                        <div
                            class="p-5 rounded-2xl bg-black/[0.02] dark:bg-white/[0.02] border border-black/[0.05] dark:border-white/[0.05] shadow-inner"
                        >
                            <p
                                class="font-bold text-[var(--primary)] mb-3 flex items-center gap-2"
                            >
                                <span
                                    class="w-1.5 h-1.5 rounded-full bg-[var(--primary)] animate-pulse"
                                ></span>
                                æäº¤å‰è‡ªæŸ¥
                            </p>
                            <ul class="space-y-2.5 opacity-90 font-medium">
                                <li class="flex items-center gap-2">
                                    âœ… <span class="dark:text-zinc-300"
                                        >ç«™ç‚¹å¯æ­£å¸¸å…¬ç½‘è®¿é—®</span
                                    >
                                </li>
                                <li class="flex items-center gap-2">
                                    âœ… <span class="dark:text-zinc-300"
                                        >å†…å®¹åˆæ³•ä¸”æ— æ¶æ„å¹¿å‘Š</span
                                    >
                                </li>
                                <li class="flex items-center gap-2">
                                    âœ… <span class="dark:text-zinc-300"
                                        >å·²æå‰æ·»åŠ æœ¬ç«™å‹é“¾</span
                                    >
                                </li>
                            </ul>
                        </div>
                        <div
                            class="flex flex-col justify-center space-y-3 opacity-80"
                        >
                            <p class="flex gap-2 font-medium">
                                ğŸ“Œ <span
                                    class="dark:text-zinc-400 text-zinc-500"
                                    >æ’åºæŒ‰æ·»åŠ æ—¶é—´é¡ºåºæ’åˆ—</span
                                >
                            </p>
                            <p class="flex gap-2 font-medium">
                                ğŸ“Œ <span
                                    class="dark:text-zinc-400 text-zinc-500"
                                    >æ— æ³•è®¿é—®è¶…30å¤©å°†ä¸‹æ¶</span
                                >
                            </p>
                            <p class="text-xs italic mt-2">
                                â€»
                                éšç§æ‰¿è¯ºï¼šå¡«å†™é‚®ç®±ä»…ç”¨äºå‹é“¾ç»´æŠ¤é€šçŸ¥ï¼Œæœ¬ç«™æ‰¿è¯ºä¿æŠ¤æ‚¨çš„éšç§ã€‚
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <div
                class="card-base p-6 relative group flex flex-col justify-center border-dashed border-2 border-[var(--primary)]/20 dark:border-[var(--primary)]/30"
            >
                <div class="relative text-center">
                    <div class="relative w-20 h-20 mx-auto mb-4">
                        <div
                            class="absolute inset-0 bg-[var(--primary)] rounded-full animate-ping opacity-10"
                        >
                        </div>
                        <img
                            src={myInfo.avatar}
                            class="relative w-20 h-20 rounded-full shadow-2xl border-4 border-white dark:border-zinc-800"
                            alt="avatar"
                        />
                    </div>
                    <div
                        class="font-black text-lg text-[var(--primary)] tracking-wide mb-1"
                    >
                        {myInfo.name}
                    </div>
                    <div
                        class="text-xs text-zinc-400 dark:text-zinc-500 mb-5 font-mono truncate"
                    >
                        {myInfo.url}
                    </div>
                    <button
                        id="copy-json-btn"
                        class="w-full py-3 text-xs font-bold bg-[var(--primary)] text-white rounded-xl shadow-lg shadow-[var(--primary)]/20 hover:shadow-[var(--primary)]/40 hover:-translate-y-0.5 active:scale-95 transition-all duration-300 flex items-center justify-center gap-2"
                    >
                        <Icon name="material-symbols:content-copy-outline" /> å¤åˆ¶æœ¬ç«™
                        JSON
                    </button>
                </div>
            </div>
        </div>

        <section
            id="form-section"
            class="card-base p-6 md:p-10 relative overflow-hidden min-h-[500px]"
        >
            <div
                class="absolute top-0 right-0 -mr-16 -mt-16 w-64 h-64 bg-[var(--primary)] opacity-[0.03] rounded-full blur-3xl pointer-events-none"
            >
            </div>

            <div
                class="flex flex-col md:flex-row md:items-center justify-between gap-4 mb-10 relative z-30"
            >
                <div class="flex items-center gap-3">
                    <div
                        class="w-12 h-12 rounded-2xl bg-orange-500/10 text-orange-500 flex items-center justify-center shadow-inner"
                    >
                        <Icon
                            name="material-symbols:rocket-launch-outline-rounded"
                            class="text-2xl"
                        />
                    </div>
                    <h2
                        class="text-2xl font-black text-black/80 dark:text-white/90"
                    >
                        ä¸€é”®æäº¤ç”³è¯·
                    </h2>
                </div>
                <div
                    id="captcha-status"
                    class="flex items-center gap-2 px-3 py-1.5 rounded-full bg-blue-500/10 border border-blue-500/20 transition-all duration-500"
                >
                    <span
                        class="status-dot w-2 h-2 rounded-full bg-blue-500 animate-pulse"
                    ></span>
                    <span
                        class="status-text text-[10px] text-blue-600 dark:text-blue-400 font-black tracking-widest uppercase"
                        >æ­£åœ¨å®‰å…¨æ‰«æ...</span
                    >
                </div>
            </div>

            <div
                id="captcha-mask"
                class="hidden absolute inset-0 z-20 bg-white/40 dark:bg-zinc-900/40 backdrop-blur-xl flex flex-col items-center justify-center p-8 text-center animate-fade-in transition-all duration-700"
            >
                <div
                    id="captcha-interactive-box"
                    class="hidden flex flex-col items-center animate-fade-in"
                >
                    <div
                        class="mb-6 p-4 rounded-3xl bg-white/50 dark:bg-zinc-800/50 border border-white dark:border-zinc-700 shadow-2xl"
                    >
                        <div id="turnstile-mount"></div>
                    </div>
                    <p
                        class="text-sm font-bold text-zinc-500 dark:text-zinc-400"
                    >
                        è¯·ç‚¹å‡»ä¸Šæ–¹å®Œæˆäººæœºèº«ä»½éªŒè¯
                    </p>
                </div>

                <div
                    id="captcha-error-box"
                    class="hidden flex flex-col items-center animate-fade-in"
                >
                    <div
                        class="w-16 h-16 bg-red-500/10 text-red-500 rounded-3xl flex items-center justify-center mb-6 border border-red-500/20"
                    >
                        <Icon
                            name="material-symbols:robot-2-outline-rounded"
                            class="text-3xl"
                        />
                    </div>
                    <h3
                        class="text-lg font-black text-zinc-800 dark:text-zinc-200 mb-2"
                    >
                        äººæœºéªŒè¯æ— æ³•å¯åŠ¨
                    </h3>
                    <p
                        class="text-xs text-zinc-500 dark:text-zinc-400 max-w-[280px] mb-8 leading-relaxed font-medium"
                    >
                        æ£€æµ‹åˆ°å®‰å…¨æœåŠ¡è¿æ¥å—é™ï¼Œè¿™å¯èƒ½æ˜¯ç”±æ‚¨çš„ç½‘ç»œç¯å¢ƒå¯¼è‡´çš„ã€‚
                    </p>
                    <div class="flex gap-3">
                        <button
                            onclick="location.reload()"
                            class="px-5 py-2.5 rounded-2xl bg-[var(--primary)] text-white text-xs font-bold hover:scale-105 transition-transform shadow-lg shadow-[var(--primary)]/30"
                            >é‡è¯•</button
                        >
                        <button
                            id="jump-to-other"
                            class="px-5 py-2.5 rounded-2xl bg-zinc-200 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 text-xs font-bold hover:scale-105 transition-transform"
                            >å…¶ä»–è”ç³»æ–¹å¼</button
                        >
                    </div>
                </div>
            </div>

            <div
                id="form-success"
                class="hidden mb-6 p-8 rounded-3xl bg-green-500/5 border border-green-500/20 text-center animate-fade-in relative z-30"
            >
                <div
                    class="w-16 h-16 bg-green-500 text-white rounded-full flex items-center justify-center mx-auto mb-4 shadow-xl shadow-green-500/20"
                >
                    <Icon
                        name="material-symbols:check-circle-rounded"
                        class="text-3xl"
                    />
                </div>
                <div
                    class="font-bold text-xl text-green-600 dark:text-green-400 mb-2"
                >
                    æäº¤æˆåŠŸï¼
                </div>
                <div
                    class="text-sm text-zinc-500 dark:text-zinc-400 font-medium"
                >
                    æˆ‘ä¼šå°½å¿«å®¡æ ¸å¹¶å›å¤ï¼Œè¯·ç•™æ„æ‚¨çš„é‚®ç®±ã€‚
                </div>
            </div>

            <form
                id="friend-form"
                class="grid grid-cols-1 md:grid-cols-2 gap-8 relative z-10 opacity-40 blur-sm pointer-events-none transition-all duration-1000"
            >
                <input
                    type="hidden"
                    name="_subject"
                    value="ã€å‹é“¾ç”³è¯·ã€‘- HAOHAO's Blog"
                />
                <input type="text" name="_honey" style="display:none" />

                <div class="space-y-2 group">
                    <label
                        class="text-[11px] font-black uppercase tracking-[0.2em] text-zinc-400 group-focus-within:text-[var(--primary)] transition-colors ml-1"
                        >ç«™ç‚¹åç§° *</label
                    >
                    <input
                        type="text"
                        name="name"
                        required
                        placeholder="HAOHAO's Blog"
                        class="form-input"
                    />
                </div>
                <div class="space-y-2 group">
                    <label
                        class="text-[11px] font-black uppercase tracking-[0.2em] text-zinc-400 group-focus-within:text-[var(--primary)] transition-colors ml-1"
                        >ç«™ç‚¹ç½‘å€ *</label
                    >
                    <input
                        type="url"
                        name="url"
                        required
                        placeholder="https://..."
                        class="form-input"
                    />
                </div>
                <div class="space-y-2 group">
                    <label
                        class="text-[11px] font-black uppercase tracking-[0.2em] text-zinc-400 group-focus-within:text-[var(--primary)] transition-colors ml-1"
                        >å¤´åƒé“¾æ¥</label
                    >
                    <input
                        type="url"
                        name="avatar"
                        placeholder="https://..."
                        class="form-input"
                    />
                </div>
                <div class="space-y-2 group">
                    <label
                        class="text-[11px] font-black uppercase tracking-[0.2em] text-zinc-400 group-focus-within:text-[var(--primary)] transition-colors ml-1"
                        >è”ç³»é‚®ç®±</label
                    >
                    <input
                        type="email"
                        name="email"
                        placeholder="æ¥æ”¶å®¡æ ¸ç»“æœé€šçŸ¥"
                        class="form-input"
                    />
                </div>
                <div class="md:col-span-2 space-y-2 group">
                    <label
                        class="text-[11px] font-black uppercase tracking-[0.2em] text-zinc-400 group-focus-within:text-[var(--primary)] transition-colors ml-1"
                        >ç«™ç‚¹ç®€ä»‹ *</label
                    >
                    <textarea
                        name="bio"
                        rows="2"
                        required
                        placeholder="ç”¨ä¸€å¥è¯ä»‹ç»ä½ çš„ç«™ç‚¹..."
                        class="form-input"></textarea>
                </div>

                <div id="hidden-turnstile" class="hidden">
                    <div
                        class="cf-turnstile"
                        data-sitekey="0x4AAAAAACgMy8TkoK2J7B87"
                        data-theme="auto"
                        data-callback="onTurnstileSuccess"
                        data-error-callback="onTurnstileError"
                        data-expired-callback="onTurnstileError"
                        data-before-interactive-callback="onTurnstileInteractive"
                    >
                    </div>
                </div>

                <div class="md:col-span-2">
                    <button
                        type="submit"
                        id="submit-btn"
                        class="w-full py-5 bg-[var(--primary)] text-white rounded-[1.5rem] font-black tracking-[0.3em] uppercase shadow-2xl shadow-[var(--primary)]/30 hover:shadow-[var(--primary)]/50 hover:-translate-y-1 active:scale-[0.98] transition-all flex items-center justify-center gap-3 overflow-hidden relative group/btn disabled:opacity-50"
                    >
                        <div
                            class="absolute inset-0 bg-white/20 translate-x-[-100%] group-hover/btn:translate-x-[100%] transition-transform duration-700 skew-x-[-20deg]"
                        >
                        </div>
                        <Icon
                            name="material-symbols:send-rounded"
                            class="text-xl"
                        />
                        ç«‹å³æäº¤ç”³è¯·
                    </button>
                </div>
            </form>
        </section>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div
                id="method-email"
                class="card-base p-8 flex flex-col items-center text-center group hover:bg-[var(--primary)]/[0.02] transition-all"
            >
                <div
                    class="w-16 h-16 rounded-[1.5rem] bg-blue-500/10 text-blue-500 flex items-center justify-center mb-6 group-hover:rotate-[10deg] transition-transform duration-500 shadow-inner"
                >
                    <Icon
                        name="material-symbols:mail-outline-rounded"
                        size={32}
                    />
                </div>
                <h3
                    class="font-black text-lg text-black/80 dark:text-white/90 mb-2 tracking-wide"
                >
                    å¸¸è§„é‚®ä»¶
                </h3>
                <p
                    class="text-xs text-zinc-500 dark:text-zinc-500 mb-6 font-medium"
                >
                    é€‚åˆä¹ æƒ¯ä½¿ç”¨é‚®ä»¶å®¢æˆ·ç«¯çš„ç”¨æˆ·
                </p>
                <a
                    href={`mailto:${myInfo.email}?subject=å‹é“¾ç”³è¯·`}
                    class="text-xs text-[var(--primary)] font-black px-6 py-3 rounded-full border-2 border-[var(--primary)]/20 hover:bg-[var(--primary)] hover:text-white transition-all tracking-widest lowercase"
                >
                    {myInfo.email}
                </a>
            </div>
            <div
                id="method-comment"
                class="card-base p-8 flex flex-col items-center text-center group hover:bg-purple-500/[0.02] transition-all"
            >
                <div
                    class="w-16 h-16 rounded-[1.5rem] bg-purple-500/10 text-purple-500 flex items-center justify-center mb-6 group-hover:rotate-[-10deg] transition-transform duration-500 shadow-inner"
                >
                    <Icon
                        name="material-symbols:chat-bubble-outline-rounded"
                        size={32}
                    />
                </div>
                <h3
                    class="font-black text-lg text-black/80 dark:text-white/90 mb-2 tracking-wide"
                >
                    ç¤¾åŒºäº¤æµ
                </h3>
                <p
                    class="text-xs text-zinc-500 dark:text-zinc-500 mb-6 font-medium"
                >
                    æ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€è¿›è¡Œäº’åŠ¨
                </p>
                <button
                    id="scroll-to-comment"
                    class="text-xs text-purple-500 font-black px-6 py-3 rounded-full border-2 border-purple-500/20 hover:bg-purple-500 hover:text-white transition-all tracking-widest uppercase"
                >
                    å‰å¾€äº’åŠ¨è®¨è®ºåŒº
                </button>
            </div>
        </div>

        <div
            class="px-6 py-4 bg-zinc-100/50 dark:bg-white/[0.02] rounded-2xl text-[11px] font-bold text-zinc-500 dark:text-zinc-500 flex items-center gap-3 border border-black/5 dark:border-white/5 shadow-sm"
        >
            <Icon
                name="material-symbols:campaign-outline-rounded"
                class="text-xl text-[var(--primary)]"
            />
            <span class="tracking-wider uppercase"
                >ç”³è¯·é€šé“æç¤ºï¼šè¯·ç¡®ä¿ä¿¡æ¯çœŸå®æœ‰æ•ˆï¼Œå®¡æ ¸ç»“æœå°†é€šè¿‡é‚®ä»¶æˆ–è¯„è®ºå›è®¿å‘ŠçŸ¥ã€‚</span
            >
        </div>

        <div id="comment-container" class="mt-4">
            <Comment />
        </div>
    </div>
</MainGridLayout>

<script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer
></script>

<style>
    .form-input {
        @apply w-full px-5 py-4 rounded-2xl bg-black/[0.03] dark:bg-white/[0.05] border border-black/10 dark:border-white/10 focus:border-[var(--primary)] focus:bg-white dark:focus:bg-zinc-800 transition-all outline-none text-sm shadow-inner text-black/80 dark:text-white/90 font-medium;
    }
    .card-base {
        @apply bg-white/80 dark:bg-zinc-900/80 backdrop-blur-2xl border border-black/[0.08] dark:border-white/[0.08] rounded-[2.5rem] shadow-sm;
    }
    @keyframes fade-in {
        from {
            opacity: 0;
            transform: scale(0.95);
        }
        to {
            opacity: 1;
            transform: scale(1);
        }
    }
    .animate-fade-in {
        animation: fade-in 0.5s cubic-bezier(0.22, 1, 0.36, 1) forwards;
    }
    textarea.form-input {
        resize: none;
    }
</style>

<script is:inline define:vars={{ myInfo }}>
    // çŠ¶æ€ä¸å…ƒç´ ç»‘å®š
    const mask = document.getElementById("captcha-mask");
    const interactiveBox = document.getElementById("captcha-interactive-box");
    const errorBox = document.getElementById("captcha-error-box");
    const form = document.getElementById("friend-form");
    const statusContainer = document.getElementById("captcha-status");
    const statusDot = statusContainer.querySelector(".status-dot");
    const statusText = statusContainer.querySelector(".status-text");
    const turnstileMount = document.getElementById("turnstile-mount");
    const hiddenTurnstile = document.getElementById("hidden-turnstile");

    let isCaptchaSolved = false;
    let isScriptLoaded = false;

    // æ ‡ç­¾è”åŠ¨
    function updateStatus(type) {
        if (type === "normal") {
            statusContainer.className =
                "flex items-center gap-2 px-3 py-1.5 rounded-full bg-green-500/10 border border-green-500/20 transition-all duration-500";
            statusDot.className =
                "status-dot w-2 h-2 rounded-full bg-green-500 animate-pulse";
            statusText.className =
                "status-text text-[10px] text-green-600 dark:text-green-400 font-black tracking-widest uppercase";
            statusText.innerText = "å®‰å…¨éªŒè¯å·²é€šè¿‡";
        } else if (type === "error") {
            statusContainer.className =
                "flex items-center gap-2 px-3 py-1.5 rounded-full bg-red-500/10 border border-red-500/20 transition-all duration-500";
            statusDot.className = "status-dot w-2 h-2 rounded-full bg-red-500";
            statusText.className =
                "status-text text-[10px] text-red-600 dark:text-red-400 font-black tracking-widest uppercase";
            statusText.innerText = "éªŒè¯è¿æ¥å¼‚å¸¸";
        } else if (type === "interactive") {
            statusContainer.className =
                "flex items-center gap-2 px-3 py-1.5 rounded-full bg-orange-500/10 border border-orange-500/20 transition-all duration-500";
            statusDot.className =
                "status-dot w-2 h-2 rounded-full bg-orange-500 animate-pulse";
            statusText.className =
                "status-text text-[10px] text-orange-600 dark:text-orange-400 font-black tracking-widest uppercase";
            statusText.innerText = "ç­‰å¾…ç”¨æˆ·éªŒè¯";
        }
    }

    function unlockForm() {
        mask.classList.add("opacity-0", "pointer-events-none");
        setTimeout(() => mask.classList.add("hidden"), 700);
        form.classList.remove("opacity-40", "blur-sm", "pointer-events-none");
        updateStatus("normal");
    }

    // Turnstile å›è°ƒå‡½æ•°
    window.onTurnstileInteractive = function () {
        isScriptLoaded = true;
        mask.classList.remove("hidden");
        interactiveBox.classList.remove("hidden");
        errorBox.classList.add("hidden");
        // å°†éªŒè¯ç ç»„ä»¶ç§»åŠ¨åˆ°é®ç½©å±‚ä¸­å¿ƒ
        turnstileMount.appendChild(
            hiddenTurnstile.querySelector(".cf-turnstile"),
        );
        hiddenTurnstile.classList.remove("hidden");
        updateStatus("interactive");
    };

    window.onTurnstileSuccess = function () {
        isCaptchaSolved = true;
        isScriptLoaded = true;
        unlockForm();
    };

    window.onTurnstileError = function () {
        isScriptLoaded = true;
        mask.classList.remove("hidden");
        interactiveBox.classList.add("hidden");
        errorBox.classList.remove("hidden");
        updateStatus("error");
    };

    // è¶…æ—¶æ£€æŸ¥
    setTimeout(() => {
        if (!isCaptchaSolved && !isScriptLoaded) {
            const iframe = document.querySelector(
                'iframe[src*="challenges.cloudflare.com"]',
            );
            if (!iframe) {
                onTurnstileError();
            }
        }
    }, 12000);

    // è¡¨å•æäº¤å¤„ç†
    form.addEventListener("submit", async (e) => {
        e.preventDefault();
        if (!isCaptchaSolved) {
            onTurnstileInteractive();
            return;
        }

        const submitBtn = document.getElementById("submit-btn");
        const originalBtnText = submitBtn.innerHTML;
        submitBtn.disabled = true;
        submitBtn.innerHTML = `<svg class="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> SENDING...`;

        try {
            const response = await fetch(
                `https://formsubmit.co/ajax/${myInfo.email}`,
                {
                    method: "POST",
                    body: new FormData(form),
                },
            );
            if (response.ok) {
                form.classList.add("hidden");
                document
                    .getElementById("form-success")
                    .classList.remove("hidden");
                document
                    .getElementById("form-success")
                    .scrollIntoView({ behavior: "smooth", block: "center" });
            } else {
                throw new Error();
            }
        } catch (error) {
            alert("å‘é€å¤±è´¥ï¼Œè¯·é‡è¯•ã€‚");
            submitBtn.disabled = false;
            submitBtn.innerHTML = originalBtnText;
            if (typeof turnstile !== "undefined") turnstile.reset();
        }
    });

    // å¤åˆ¶äº¤äº’
    document.getElementById("jump-to-other").onclick = () => {
        document
            .getElementById("method-email")
            .scrollIntoView({ behavior: "smooth", block: "center" });
    };

    document.getElementById("copy-json-btn").onclick = function () {
        const jsonStr = JSON.stringify(
            {
                name: myInfo.name,
                url: myInfo.url,
                avatar: myInfo.avatar,
                bio: myInfo.bio,
            },
            null,
            2,
        );
        navigator.clipboard.writeText(jsonStr).then(() => {
            const oldHtml = this.innerHTML;
            this.innerHTML = `âœ… å·²æˆåŠŸå¤åˆ¶`;
            this.classList.replace("bg-[var(--primary)]", "bg-green-500");
            setTimeout(() => {
                this.innerHTML = oldHtml;
                this.classList.replace("bg-green-500", "bg-[var(--primary)]");
            }, 2000);
        });
    };

    document.getElementById("scroll-to-comment").onclick = () => {
        const target = document.getElementById("comment-container");
        window.scrollTo({ top: target.offsetTop - 80, behavior: "smooth" });
    };
</script>
