# 🚀 博客自定义功能维护指南

本文档用于记录博客中额外添加的自定义页面与组件结构，包括：

* 说说（Moments）页面
* 友情链接页面
* 卡片组件

所有数据与页面逻辑均遵循 Astro 项目推荐的 **数据与视图分离** 设计。

---

## 📂 项目目录结构

以下路径均支持在 Markdown 预览或 GitHub 中点击跳转（基于当前项目根目录）。

| 功能模块     | 数据文件（更新内容）                                         | 页面模板（修改样式）                                                             |
| -------- | -------------------------------------------------- | ---------------------------------------------------------------------- |
| **友情链接** | [`src/data/friends.json`](./src/data/friends.json) | [`src/pages/friends/index.astro`](./src/pages/friends/index.astro)     |
| **我的说说** | [`src/data/ss.json`](./src/data/ss.json)           | [`src/pages/ss/index.astro`](./src/pages/ss/index.astro)               |
| **卡片组件** | —                                                  | [`src/components/FriendCard.astro`](./src/components/FriendCard.astro) |
| **导航配置** | —                                                  | [`src/config.ts`](./src/config.ts)                                     |

> 💡 提示：路径基于当前 Markdown 文件与 `src` 同级目录。如果你的目录结构不同，请相应调整 `./` 层级。

---

## 📝 内容更新说明

---

### ✅ 更新友情链接

打开：

👉 [`src/data/friends.json`](./src/data/friends.json)

按以下格式添加：

```json
{
  "name": "好友名字",
  "url": "https://好友博客链接",
  "avatar": "https://头像图片链接",
  "bio": "好友的简短描述"
}
```

说明：

* 支持添加多个对象
* 推荐保持字段完整，避免渲染异常

---

### ✅ 更新说说内容

打开：

👉 [`src/data/ss.json`](./src/data/ss.json)

最新内容放在数组最上方：

```json
{
  "date": "2026-02-13 22:30:00",
  "content": "这里是说说的文字内容，支持换行。",
  "images": [
    "https://图片链接1",
    "https://图片链接2"
  ],
  "tags": ["生活", "代码"]
}
```

字段说明：

| 字段        | 说明                |
| --------- | ----------------- |
| `date`    | 建议完整时间格式，便于相对时间计算 |
| `content` | 文本内容，支持多行         |
| `images`  | 没有图片时保持 `[]`      |
| `tags`    | 可选标签数组            |

---

## 🛠 功能逻辑说明

---

### 🕒 相对时间显示（说说页）

系统会自动计算时间差：

* 小于 1 分钟 → **刚刚**
* 小于 1 小时 → **X分钟前**
* 小于 24 小时 → **X小时前**
* 昨天 / 前天 → 直接显示
* 超过一周 → 显示原始日期

无需人工干预。

---

### 🖼 图片放大预览

实现方式：

* 原生 JavaScript
* 动态 Modal 层挂载到 `<body>`
* 保证居中与层级安全

交互：

* 点击图片 → 放大
* 点击背景 / `Esc` → 关闭

无需外部依赖。

---

### 🎨 深浅色模式自适应

基于 Tailwind：

* 使用 `dark:` 前缀控制样式
* 自动适配系统主题

视觉策略：

* 亮色模式 → 深色文字 + 半透明
* 暗色模式 → 浅色文字 + 半透明
* Hover → 提高不透明度与颜色对比

---

## 🔗 导航栏配置

菜单名称或路径修改：

👉 [`src/config.ts`](./src/config.ts)

默认路径：

* 友情链接 → `/friends/`
* 我的说说 → `/ss/`

修改后需重新构建项目。

---

## ✅ 维护建议

* 所有内容更新优先修改 `data` 文件
* 页面样式修改集中在 `.astro` 模板
* 保持 JSON 格式规范，避免构建错误
* 推荐每次修改后本地预览确认效果

---

## 🎯 快速维护入口

| 操作     | 直达位置                                      |
| ------ | ----------------------------------------- |
| 添加友情链接 | [`friends.json`](./src/data/friends.json) |
| 发布说说   | [`ss.json`](./src/data/ss.json)           |
| 页面样式调整 | [`pages`](./src/pages)                    |
| 组件修改   | [`components`](./src/components)          |
| 菜单配置   | [`config.ts`](./src/config.ts)            |

---

> 📌 本文档旨在降低长期维护成本，建议与项目一同版本管理。
